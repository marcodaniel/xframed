%%=======================================================%%
%%=======================================================%%
%% xframed-todo.def                                      %%
%%                                                       %%
%% file for developming -- only a small list of todos    %%
%% file is part of the package xframed                   %%
%%                                                       %%
%% Author's name: Marco Daniel                           %%
%% License type: lppl                                    %%
%%                                                       %%
%%  Copyright (c) 2013 Marco Daniel                      %%
%%                                                       %%
%%  This package may be distributed under the terms      %%
%%  of the LaTeX Project Public License, as described    %%
%%  in lppl.txt in the base LaTeX distribution.Either    %%
%%  version 1.0 or, at your option, any later version.   %%
%%=======================================================%%
%%=======================================================%%





%%http://chat.stackexchange.com/transcript/message/9270880#9270880

\cs_new:Npn  \xframed_csuse_withouterrors:n #1
 {
  \cs_if_exist:cT { #1 } 
    { \use:c { #1 } }
 }

%%puts material before the environment
%%  \xframed_before_env:n{env-name}{material}
\cs_new:Npn \xframed_before_env:nn #1 #2
 {
  \tl_if_exist:cF { xframed_beforebegin_#1_hook }
   { \tl_new:c { xframed_beforebegin_#1_hook } }
  \tl_gput_left:cn {xframed_beforebegin_#1_hook}{ #2 }
 }
%%puts material after the environment
%%  \xframed_after_env:n{env-name}{material}
\cs_new:Npn \xframed_after_env:nn #1 #2
 {
  \tl_if_exist:cF { xframed_afterend_#1_hook }
   { \tl_new:c { xframed_afterend_#1_hook } }
  \tl_gput_right:cn {xframed_afterend_#1_hook} { #2 }
 }
%%%%%
%%%%
%%interface to LaTeX23

\ExplSyntaxOff
%%
%%\regexpatchcmd{\begin}
%%  {\A}
%%  {\c{xframed_csuse_withouterrors:n}  \cB\{ xframed_beforebegin_\cP\#1_hook \cE\} }
%%  {}{}
%%\regexpatchcmd{\begin}
%%  {\A}
%%  {\c{xframed_csuse_withouterrors:n}  \cB\{ xframed_beforebegin_\cP\#1_hook \cE\} }
%%  {\wlog{xframed-begin-success}}{\wlog{xframed-begin-failed}}
%%\regexpatchcmd{\end}
%% {\c{if@ignore}}
%% {\c{xframed_csuse_withouterrors:n}  \cB\{ xframed_afterend_\cP\#1_hook \cE\}
%%  \c{if@ignore}}
%%  {\wlog{xframed-end-success}}{\wlog{xframed-end-failed}}
 


 


%%%%%%%%%expand all begin commands
%%%%%%%
%%%%%%%
%%%%%%%\cs_set_eq:NN \begin_orig:n \begin
%%%%%%%\tl_set:Nn \l_tmpa_tl 
%%%%%%%  { \xframed_csuse_withouterrors:n  { xframed_beforebegin_#1_hook } }
%%%%%%%\RenewDocumentCommand { \begin } {}
%%%%%%% {
%%%%%%%  \exp_not:o { \l_tmpa_tl }
%%%%%%%  \begin_orig:n
%%%%%%% }
%%%%%%%
%%%%%%%
%%%%%%%%%%%\xapptocmd 
%%%%%%%%%%% { \begin }
%%%%%%%%%%% {  
%%%%%%%%%%%  \xframed_csuse_withouterrors:n  { xframed_beforebegin_#1_hook } 
%%%%%%%%%%% }
%%%%%%%%%%% {
%%%%%%%%%%%  \msg_info:nnn {xframed} { patching-worked } { \begin }
%%%%%%%%%%% }
%%%%%%%%%%% {
%%%%%%%%%%%  \msg_warning:nnn {xframed} { patching-failed } { \begin }
%%%%%%%%%%% }
%%%%%%%%%expand all end commands
%%%%%%%\xpatchcmd 
%%%%%%% { \end }
%%%%%%% {\if@ignore}  
%%%%%%% {  
%%%%%%%  \xframed_csuse_withouterrors:n  { xframed_afterend_#1_hook } 
%%%%%%%  \if@ignore
%%%%%%% }
%%%%%%% {
%%%%%%%  \msg_info:nnn {xframed} { patching-worked } { \end }
%%%%%%% }
%%%%%%% {
%%%%%%%  \msg_warning:nnn {xframed} { patching-failed } { \end }
%%%%%%% }
%%%%%%%